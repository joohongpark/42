@@ -19,13 +19,17 @@
 # Default server configuration
 #
 server {
-	listen 80 default_server;
-	listen [::]:80 default_server;
-
+	listen	80 default;
+	location / {
+		return 301 https://$host$request_uri;
+	}
+}
+server {
+	autoindex on;
 	# SSL configuration
 	#
 	# listen 443 ssl default_server;
-	# listen [::]:443 ssl default_server;
+	listen 443 ssl default;
 	#
 	# Note: You should disable gzip for SSL traffic.
 	# See: https://bugs.debian.org/773332
@@ -37,11 +41,16 @@
 	# Don't use them in a production server!
 	#
 	# include snippets/snakeoil.conf;
+	ssl on;
 
+	ssl_certificate      /etc/certs/gen.crt;
+	ssl_certificate_key  /etc/certs/priv.key;
+	ssl_session_timeout  5m;
+	ssl_prefer_server_ciphers   on;
 	root /var/www/html;
 
 	# Add index.php to the list if you are using PHP
-	index index.html index.htm index.nginx-debian.html;
+	index index.html index.htm index.nginx-debian.html index.php;
 
 	server_name _;
 
@@ -53,14 +62,14 @@
 
 	# pass PHP scripts to FastCGI server
 	#
-	#location ~ \.php$ {
-	#	include snippets/fastcgi-php.conf;
+	location ~ \.php$ {
+		include snippets/fastcgi-php.conf;
 	#
 	#	# With php-fpm (or other unix sockets):
-	#	fastcgi_pass unix:/run/php/php7.3-fpm.sock;
+		fastcgi_pass unix:/run/php/php7.3-fpm.sock;
 	#	# With php-cgi (or other tcp sockets):
 	#	fastcgi_pass 127.0.0.1:9000;
-	#}
+	}
 
 	# deny access to .htaccess files, if Apache's document root
 	# concurs with nginx's one
