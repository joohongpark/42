# get next line

## 요구사항

- get_next_line 함수 작성 (제출해야 하는 파일 : get_next_line.c get_next_line.h)
- 사용 가능한 함수 : read, free, malloc
- 파일 디스크립터 0으로부터 입력을 받아 매개 변수 line에 개행 단위로 문자열을 저장하는 함수를 만들어라.
- 함수의 프로토 타입은 다음과 같다. int get_next_line(char **line);
- 함수의 리턴값은 1, 0, -1 세 가지 상태를 가지는데 1은 개행 혹은 eof를 만나 정상적인 한 줄을 가져왔을 때, 0은 eof를 만나 더 이상 가져오지 못할 때, -1은 에러가 발생할 때이다.
- 문자열이 저장될 때는 개행이 포함되면 안된다.
- 테스트는 test.sh를 이용해서 진행한다.
- get_next_line 함수를 다음과 같이 코딩했을 때 cat -e [텍스트 파일] 과 완전히 동일하게 동작되어야 한다.

```c
int main(void)
{
	int		r;
	char	*line;

	line = NULL;
	while ((r = get_next_line(&line)) > 0)
	{
		printf("%s\n", line);
		free(line);
		line = NULL;
	}
	printf("%s", line);
	free(line);
	line = NULL;
}
```

## 로직

정적 변수 버퍼(n바이트) = 0

루프 시작

만약에 버퍼가 비었으면?

- 버퍼 사이즈만큼 읽어서 가져온다.(read)
- 만약 읽었는데 -1을 리턴한다면?
  - malloc으로 할당한 문자열 할당해제하고 -1 리턴하고 종료함.
- 아니면 읽어온 문자열이 없고 리턴할 문자열이 비어있지 않아면
  - 마지막 문자열이므로 마지막 문자열 전달하고 0 리턴
- 아니면 읽어온 문자열이 버퍼 길이보다 짦다면?
  - 뒤에 쓰레기 값이 있을수도 있으므로 끝에 널 문자 채움

버퍼가 비어있지 않으면?

- 버퍼 내에서 개행 위치를 찾는다 (ft_findchar)
- 만약 개행이 존재하지 않으면
  - 반환할 문자열에 현재 버퍼를 저장하고(이어붙이고) 버퍼에 널 문자 집어넣고 루프 처음으로 돌아감.
- 개행이 존재하면
  - 버퍼의 시작점부터 개행위치까지를 반환할 문자열에 이어붙임.
  - 버퍼 개행 뒤에 있는 문자열을 앞으로 당김.
  - 루프 빠져나감. (1 리턴)

루프 끝

리턴 (0)

